<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html xmlns:o="urn:schemas-microsoft-com:office:office"
 xmlns:w="urn:schemas-microsoft-com:office:word"
 xmlns="http://www.w3.org/TR/REC-html40">
<head>
  <meta http-equiv="Content-Type"
 content="text/html; charset=iso-8859-1">
  <meta name="ProgId" content="Word.Document">
  <meta name="Generator" content="Microsoft Word 9">
  <meta name="Originator" content="Microsoft Word 9">
  <link rel="File-List" href="./OptimizeIt_files/filelist.xml">
  <title>OptimeIt</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>COMPAQ</o:Author>
  <o:LastAuthor>COMPAQ</o:LastAuthor>
  <o:Revision>3</o:Revision>
  <o:TotalTime>2</o:TotalTime>
  <o:Created>2004-04-05T05:02:00Z</o:Created>
  <o:LastSaved>2004-04-05T05:04:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>822</o:Words>
  <o:Characters>4688</o:Characters>
  <o:Company>Adventnet Inc</o:Company>
  <o:Lines>39</o:Lines>
  <o:Paragraphs>9</o:Paragraphs>
  <o:CharactersWithSpaces>5757</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:TargetScreenSize>1152x882</o:TargetScreenSize>
 </o:OfficeDocumentSettings>
</xml><![endif]-->
  <style>
<!--
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p
	{font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
  </style>
</head>
<body style="" lang="EN-US">
<div class="Section1">
<h2 style="text-align: center;" align="center"><span
 style="font-family: Arial;">OptimizeIt<o:p></o:p></span></h2>
<p class="MsoNormal" style="margin-bottom: 12pt;"><br>
<br>
<b><span style="font-family: Arial;">Introduction</span></b><br>
<br>
<span style="font-size: 10pt; font-family: Arial;">Optimizeit
Profiler is a Java tool that enables developers to test and improve the
performance of Java applications, applets, servlets, JavaBeans,
Enterprise
JavaBeans (EJBs) and Java Server Pages (JSPs). It helps us to go
"behind
the scenes" of the Java virtual machine to identify any Java code
allocating too much memory or using the CPU in an inefficient way. <br>
<br>
The CPU Profiler shows the methods in the java program which actually
take up
the CPU time. To use CPU Profiler, we record a test session and then
examine
the results. Optimizeit Profiler gives us a per-thread description of
the time
spent in each method or CPU used during the test session. This helps us
understand to make changes in our program to improve its performance. <br>
<br>
We have different options in which we can open various types of
programs. The
various programs that can be examined are Applications, Remote
Applications,
Applets and Servlets.<br>
The evaluation version of OptimizeIt can be downloaded from <span
 style="color: rgb(51, 51, 255);">www.borland.com/optimizeit</span><br>
</span></p>
<p><b><span style="font-family: Arial;">Monitoring a Remote Application
using
OptimizeIt</span></b></p>
<p><span style="font-size: 10pt; font-family: Arial;">Monitoring Web
NMS </span><span style="font-size: 10pt; font-family: Arial;">running
a remote machine</span><span
 style="font-size: 10pt; font-family: Arial;"> can be done for cpu
usage, thread
details, Garbage
Collection
Activity, Heap, instantiation details etc . In this example, we see how
to open Web&nbsp; NMS
remotely for monitoring of cpu usage, thread count, no. of classes
instantiated, no. of instances of objects created etc.</span><span
 style="font-size: 10pt;"> <br>
&nbsp;
<br>
<o:p></o:p></span></p>
<p class="MsoNormal" style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">1) Make the following
modifications
to the &lt;webnmshome&gt;/bin/startnms.sh (Replace&nbsp; %&nbsp;
accordingly for Windows)</span><span style="font-size: 10pt;"><o:p></o:p></span></p>
<p class="MsoNormal" style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">Open the file</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">Make the
following
changes</span><span style="font-size: 10pt;"> <br>
</span><span style="font-size: 10pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Set path corresponding to the OptimizeIt directory installed</span> </p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
OP_PATH=&lt;OptimizeItInstallationpath&gt;</span><br>
<span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
LD_LIBRARY_PATH=$OP_PATH/lib:$LD_LIBRARY_PATH</span><br>
<span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
export LD_LIBRARY_PATH</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
CLASS_PATH=$OP_PATH/jre/lib/rt.jar:$OP_PATH/lib/optit.jar:$CLASS_PATH:</span>
<br>
<span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 255);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
export PATH</span><span style="font-size: 10pt; font-family: Arial;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
</p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 0, 153);">$JAVA_HOME/bin/java
-native </span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(255, 102, 102);">-Xrunpri
-Xbootclasspath/a:$OP_PATH/lib/oibcp.jar</span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 0, 153);"> </span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 51, 153);">-cp
$CLASS_PATH</span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 0, 153);">
-Dcatalina.home=$TOMCAT_HOME
-Dmysql.home=$MYSQL_HOME -Dwebserver.port=$WEBSERVER_PORT
-Dresource_check="$WEBSERVER_PORT,$WEBCONTAINER_PORT"
-Dwebserver.rootdir=$WEBSERVER_HOME
-Djava.rmi.server.codebase="$CODEBASE_LIST" </span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: red;">-mx100m
intuitive.audit.Audit</span></b><b><span
 style="font-size: 10pt; font-family: Arial; color: rgb(51, 0, 153);">com.adventnet.nms.startnms.NmsMainBE
NMS_BE_PORT 2000 ROOT_DIR $NMS_HOME $*</span></b><span
 style="font-size: 10pt; font-family: Arial;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial; color: black;">2) Start
the server by
running sh startnms.sh</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial; color: black;">3)
Since we have made some changes to startnms.sh,
initializing of OptimizeIt with the server is shown as</span><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
<p class="MsoNormal" style="margin-right: 1.5in; margin-left: 1.5in;"><span
 style="font-size: 10pt; font-family: Arial;">OptimizeIt Profiler 4.2
build
020502 Audit System.</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">(c) 1997-2002
Borland.</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">Port is 1470</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">OptimizeIt
generic Audit System. [Hotspot runtime detected]</span><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
<p class="MsoNormal" style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">This shows that through
Port 1470 the server can be
monitored remotely using OptimizeIT.&nbsp;</span><span
 style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">4) Start OptimizeIt
Client by executing OptimzieIt executable.</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">5)
Edit==&gt;Attach: Configure host and port (1470)</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">6) Click Ok.</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">Now its all set to
monitor the Web NMS Server</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;"><span
 style="font-weight: bold;">Memory Profiler</span></span><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">Now the Optimizer shows
the
instances of objects created in the server.</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;"><br>
Heap shows the Name of class, instance count and diff are displayed. If
details
of cpu usage are to be known double click on the classname and in the
screen
that appears we can see a tree structure. To know more about it, we
have to
expand the nodes. The methods with a blue arrow pointing downwards
shows that
the current method has invoked another method and we have to expand to
the
point where a red star appears behind the class name. This is the
method that
has actually occupied the CPU time.</span><span style="font-size: 10pt;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">For example,</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">0.82%
com.adventnet.management.transaction.ConnectionPool.formPreparedStatement()</span><span
 style="font-size: 10pt;"> <br>
</span><span style="font-size: 10pt; font-family: Arial;">1.64%
com.adventnet.management.transaction.ConnectionPool.formPreparedStatement()</span><span
 style="font-size: 10pt;"> <br>
</span><span style="font-size: 10pt; font-family: Arial;">The parent
nodes show the hierarchy in which this method is called. They
show the same percentage of CPU usage.</span><span
 style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">If a parent node(method)
invokes
two methods which in turn call other methods then the CPU usage for
this parent
method is sum of CPU usage of its child nodes which have actually
occupied cpu
time.</span><span style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">Hence we see that
com.adventnet.nms.mapdb.CommonMapAPI.initializeMapData() is shown as
2.46% =
1.64%+ 0.82%. The above method is the parent method which has invoked
the above
described two methods.</span><span style="font-size: 10pt;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">Note: There are other
methods
invoked between the invocation of
com.adventnet.nms.CommonMapAPI.initializeMapData() and
com.adventnet.management.transaction.ConnectionPool.formPreparedStatement()</span><span
 style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">By specifying the source
files for
the classes we have loaded in OptimizeIt, the source code of the file
can be
seen by double clicking on the method. We can also specify the source
file by
using the browse button that appears on double clicking the method name.</span><span
 style="font-size: 10pt;"> <o:p></o:p></span></p>
<span style="font-weight: bold;">&nbsp;&nbsp;&nbsp;&nbsp; <small>CPU
Profiling:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</small></span><small>The details of CPU usage for a given task(say
data
collection for a given MO) can be&nbsp; obtained through the following
steps,<br>
</small><span style="font-weight: bold;"><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</small></span><small>1.Click on CPU image icon&nbsp; - This shows CPU
Profiler<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
2.Start the task(triggering data collection )<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
3.</small><small>Click Start Image Icon&nbsp;&nbsp; - this starts CPU
usage
information by current threads<br>
&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;
4.Wait till the task gets completed( data collection completion)<span
 style="font-style: italic;"><span style="font-family: monospace;"></span></span><br>
</small><small>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
3. Stop the CPU profiling by clicking of Stop Image Icon<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
4. CPU % usage of various threads will be displayed here.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
5. Generate Snap shot : File=&gt;Generate Snap Shot The details of the
CPU usage by various threads in a particular period of time is
available in the snap shot
file. <br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
</small>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><b><span
 style="font-size: 10pt; font-family: Arial;">Exporting Data</span></b><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">If the data got by
profiling a
java application, applet, servlet etc has to be saved, we can use this
option
to save the data for future use. We have to give the filename and the
path
where the data has to be saved. The data can be saved in the form of
pure ASCII
files or in the form of html files.</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">As soon as
the data is exported, the data opens up in the required
editor, if it is in HTML format then it opens in the browser.</span><span
 style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">This data can be exported
to excel
or other software to generates graphs with the data.<br>
</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-weight: bold;"><br>
</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-weight: bold;"><br>
</span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><b><span
 style="font-size: 10pt; font-family: Arial;">Other Useful features of
OptimizeIT</span></b><span style="font-size: 10pt;"> <o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">The information or data
collected
from OptimizeIt can be stored in the form of snapshots for future
analysis.</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">This can be
done using File|Generate Snapshot.</span><span style="font-size: 10pt;">
<br>
</span><span style="font-size: 10pt; font-family: Arial;">we have to
provide the following details namely</span><span
 style="font-size: 10pt;"> <br>
</span><span style="font-size: 10pt; font-family: Arial;">1) The
directory in which the generated snapshot has to be saved</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">2) The title
and other relevant information if necessary</span><span
 style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">3) Comments
or notes.</span><span style="font-size: 10pt;"><br>
</span><span style="font-size: 10pt; font-family: Arial;">4) Data
regarding memory profiler data, cpu profiler data(if it is
recorded) and reference graphs can also be saved in this snapshot.</span><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><span
 style="font-size: 10pt; font-family: Arial;">We can open these
snapshots at any
point of time for comparing it with results got after some
modifications in
code or logic or both.</span><span style="font-size: 10pt;"><o:p></o:p></span></p>
<b><span style="font-size: 10pt; font-family: Arial;"></span></b>
<p style="margin-right: 0.5in; margin-left: 0.5in;"><br>
<span style="font-size: 10pt; font-family: Arial;"></span><span
 style="font-size: 10pt;"><o:p></o:p></span></p>
</div>
</body>
</html>
