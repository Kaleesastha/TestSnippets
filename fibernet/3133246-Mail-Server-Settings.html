<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>3133246-Mail-Server-Settings</title>
  </head>
  <body>
    <meta charset="utf-8">
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Hi Rafael,</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif"><br>
      </font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Thanks for your suggestion.<br>
        We'll have this in our features database.<br>
        For now, please implement this in SmtpMailer.java as mentioned.</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif"><br>
      </font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Thanks &amp; regards,</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Venkatramanan.</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif"><br>
      </font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">&lt;Rafael Casar Asuar&gt;
        wrote--------------</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Hi Venkatramanan,</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">When I get to send an email from WebNMS, it
        would be interesting to add a TLS option to the 'Add Mail
        Account' form, in order to let the user choose between SSL and
        TLS.</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif"><br>
      </font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Regards,</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">Rafael Casar Asuar</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif"><br>
      </font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;"><font size="3" face="times new
        roman, times, serif">De: "ZohoCorp WebNMS Support"
        &lt;nms-support@webnms.com&gt;</font></div>
    <div style="color: rgb(0, 0, 0); font-family: Verdana, Arial,
      Helvetica, sans-serif; font-size: 11px; font-style: normal;
      font-variant-ligatures: normal; font-variant-caps: normal;
      font-weight: normal; letter-spacing: normal; orphans: 2;
      text-align: start; text-indent: 0px; text-transform: none;
      white-space: normal; widows: 2; word-spacing: 0px;
      -webkit-text-stroke-width: 0px; text-decoration-style: initial;
      text-decoration-color: initial;">
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Hi Rafael,<br>
          <br>
          We had got the&nbsp;<a
href="https://github.com/ramanan99/TestSnippets/blob/master/SmtpMailer.java">SmtpMailer.java
            file</a>&nbsp;for your reference.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Please look at the place&nbsp;<a
href="https://github.com/ramanan99/TestSnippets/blob/master/SmtpMailer.java##L407-L413">where
            the SSL specific system properties are set</a>&nbsp;and
          modify them according to your need.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Let us know whether modifying this and&nbsp;<a
            href="http://genius.com/10506696">updating
            NmsServerClasses.jar</a>, resolves the issue.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif"><br>
          Thanks &amp; regards,</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Venkatramanan.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif"><br>
        </font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">&lt;Rafael Casar Asuar&gt; wrote--------------</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Hi Venkatramanan,</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Finally I have got to send a mail using the attached
          TestMail.java and the updated Mail.jar. As you can see in the
          file, I have commented out the lines related to
          'mail.smtp.socketFactory' and added the 'mail.smtp.ssl.trust'
          property in order to work.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">However, when I configure the Mail Account from WebNMS,
          I get this error message:</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Unable to connect to the Mail Server. Please check if
          the Mail service is running on the specified host/port.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">I think that updating Mail.jar it's not enough and you
          have to add TLS support to the WebNMS Mail Account form.</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif"><br>
        </font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Regards,</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">Rafael Casar Asuar</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif"><br>
        </font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;"><font size="3" face="times new roman, times,
          serif">De: "ZohoCorp WebNMS Support"
          &lt;nms-support@webnms.com&gt;</font></div>
      <div style="font-family: Verdana, Arial, Helvetica, sans-serif;
        font-size: 11px;">
        <div><font size="3" face="times new roman, times, serif">Hi
            Rafael,</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
          </font></div>
        <div><font size="3" face="times new roman, times, serif">Since
            we couldn't reproduce the issue ourselves, we couldn't
            analyse the issue.<br>
            Please look into this&nbsp;<a
href="http://stackoverflow.com/questions/16115453/javamail-could-not-convert-socket-to-tls-gmail">stackoverflow
              page</a>.</font></div>
        <div><font size="3" face="times new roman, times, serif">This
            seems to be having a solution to your error.</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
            Thanks &amp; Regards,<br>
            Venkatramanan.</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
          </font></div>
        <div><font size="3" face="times new roman, times, serif">&lt;Rafael
            Casar Asuar&gt; wrote--------------</font></div>
        <div><font size="3" face="times new roman, times, serif">Hi
            Venkatramanan,</font></div>
        <div><font size="3" face="times new roman, times, serif">I have
            tried to send a mail from our TLS server doing the steps in
            this wiki page and using Mail.jar 1.5.3 instead v1.3.1
            without success.</font></div>
        <div><font size="3" face="times new roman, times, serif">I get
            this exception: Could not convert socket to TLS; PKIX path
            building failed:
            sun.security.provider.certpath.SunCertPathBuilderException:
            unable to find valid certification path to requested target.</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
          </font></div>
        <div><font size="3" face="times new roman, times, serif">Please,
            find attached the nohup.out log file. Maybe the issue is
            related to a valid certificate?</font></div>
        <div><font size="3" face="times new roman, times, serif">Regards,</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
          </font></div>
        <div><font size="3" face="times new roman, times, serif">Rafael
            Casar Asuar</font></div>
        <div><font size="3" face="times new roman, times, serif"><br>
          </font></div>
        <div><font size="3" face="times new roman, times, serif">De:
            "ZohoCorp WebNMS Support" &lt;nms-support@webnms.com&gt;</font></div>
        <div>
          <div><font size="3" face="times new roman, times, serif">Hi
              Rafael,</font></div>
          <div>
            <div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><font size="3">In some of the mail
                  servers (which use TLS), we face the exception you had
                  reported in nohup.out and the mail is not sent.</font><br>
              </div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><font size="3">In that case, please
                  download Mail.jar 1.5.3 version (<a
                    href="https://github.com/ramanan99/TestSnippets/blob/master/Mail.jar">available
                    from here</a>) and save the same under
                  NMS_HOME/classes (Replace the existing one which is
                  v1.3.1)</font></div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><span style="font-size: medium;">Now
                  check whether this works.</span><span
                  style="font-size: medium;">&nbsp;</span><font size="3">If
                  this works, you can bundle the same.</font></div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><span style="color: rgb(51, 51, 51);
                  font-size: medium; background-color: rgb(254, 254,
                  254);">Ensure to edit the COPYRIGHT file properly (</span><b
                  style="color: rgb(51, 51, 51); font-size: medium;
                  background-color: rgb(254, 254, 254);"><i>Mail.jar
                    JavaMail API 1.3.1</i></b><span style="color:
                  rgb(51, 51, 51); font-size: medium; background-color:
                  rgb(254, 254, 254);">&nbsp;should be edited as&nbsp;</span><b
                  style="color: rgb(51, 51, 51); font-size: medium;
                  background-color: rgb(254, 254, 254);"><i>Mail.jar
                    JavaMail API 1.5.3</i></b><span style="color:
                  rgb(51, 51, 51); font-size: medium; background-color:
                  rgb(254, 254, 254);">)</span></div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><font size="3"><br>
                </font></div>
              <div style="font-family: &quot;times new roman&quot;,
                times, serif;"><font size="3">If the issue persists,
                  please get back to us.<br>
                  <br>
                  Thanks &amp; Regards,<br>
                  Venkatramanan<br>
                  <br>
                </font></div>
            </div>
            <div id="ghostery" class="ghostery-bottom ghostery-right
              ghostery-collapsed" style="margin: 0px; padding: 0px;
              border: 0px; top: initial; bottom: 10px; left: initial;
              right: 10px; font-variant-numeric: inherit; font-stretch:
              inherit; line-height: 19.8px; vertical-align: baseline;
              color: rgb(255, 255, 255); position: fixed; font-family:
              &quot;Open Sans&quot;, Roboto, Arial, Helvetica,
              sans-serif !important; z-index: 2147483647 !important;">
              <div id="ghostery-box" style="margin: 0px; padding: 0px;
                border-width: 0px 0px 1.25px; border-bottom-style:
                solid; border-bottom-color: rgb(146, 0, 148); top:
                initial; bottom: initial; left: initial; right: initial;
                font-style: inherit; font-variant: inherit; font-weight:
                inherit; font-stretch: inherit; font-size: inherit;
                line-height: inherit; font-family: inherit;
                vertical-align: baseline; height: 35px; width: 35px;
                opacity: 0.92; border-radius: 25px; overflow: hidden;
                transition: width 0.5s, border-radius 0.5s, box-shadow
                0.1s ease 0.5s; background-color: rgb(146, 0, 148);"><br>
                <br class="Apple-interchange-newline">
              </div>
            </div>
          </div>
          <div><font size="3" face="times new roman, times, serif">&lt;Rafael
              Casar Asuar&gt; wrote--------------</font></div>
          <div><font size="3" face="times new roman, times, serif">Hi
              Venkatramanan,</font></div>
          <div><font size="3" face="times new roman, times, serif">Please
              find attached the nohup.out log file. Our mail server uses
              TLS protocol instead of SSL, I think this is the issue.
              Does WebNMS offer TLS support?</font></div>
          <div><font size="3" face="times new roman, times, serif"><br>
            </font></div>
          <div><font size="3" face="times new roman, times, serif">Regards,</font></div>
          <div><font size="3" face="times new roman, times, serif">Rafael</font></div>
          <div><font size="3" face="times new roman, times, serif"><br>
            </font></div>
          <div><font size="3" face="times new roman, times, serif">De:
              "ZohoCorp WebNMS Support" &lt;nms-support@webnms.com&gt;</font></div>
          <div>
            <div><font size="3" face="times new roman, times, serif">Hi
                Rafael,<br>
                <br>
                <div>If you face any issues in sending mail from WebNMS
                  (esp. in SSL mode of mail server), please do the steps
                  in&nbsp;<a
                    href="https://nmskbase.wiki.zoho.com/TestMail.hlp">this
                    wiki page</a>&nbsp;and let us know the procedure
                  works.<br>
                  This will help us to analyse the issue.</div>
                <div><br>
                  Thanks &amp; Regards,<br>
                  Venkatramanan.</div>
                <div><br>
                </div>
              </font></div>
            <div><font size="3" face="times new roman, times, serif">&lt;Rafael
                Casar Asuar&gt; wrote--------------</font></div>
            <div><font size="3" face="times new roman, times, serif">Dear
                Support Team,</font></div>
            <div><font size="3" face="times new roman, times, serif">I
                get this EXCEPTION whenever I try to configure a Mail
                account (to send alerts by e-mail) with SSL Secure
                Connection (our server port is 587). What could be the
                problem?</font></div>
            <div><font size="3" face="times new roman, times, serif"><br>
              </font></div>
            <div><font size="3" face="times new roman, times, serif">javax.net.ssl.SSLHandshakeException
                cannot be cast to javax.mail.MessagingException</font></div>
            <div><font size="3" face="times new roman, times, serif"><br>
              </font></div>
            <div><font size="3" face="times new roman, times, serif">Regards,</font></div>
            <div><font size="3" face="times new roman, times, serif">Rafael
                Casar Asuar</font></div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
