<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Changes for removing Apache</title>
</head>
<body>
<small style="font-family: tahoma;"><span style="font-weight: bold;">WebNMS
Changes<br>
</span></small>
<ul>
  <li><small style="font-family: tahoma;"><a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#conf">Conf
Changes<br>
    <br>
    </a></small></li>
  <li><small style="font-family: tahoma;"><span
 style="font-weight: bold;">Script Changes</span> - <a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#setEnvbat">setEnv.bat</a>
    <a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#setEnvsh">setEnv.sh</a>
    <a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#startnmbat">startnms.bat</a>
    <a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#startnmsh">startnms.sh<br>
    <br>
    </a></small></li>
  <li><small style="font-family: tahoma;"><a
 href="file:///C:/DOCUME%7E1/VENKAT%7E2/LOCALS%7E1/Temp/Migration.html#ssl">SSL
- The
biggest advantage!</a></small><br>
  </li>
</ul>
<small style="font-family: tahoma;"><span style="font-weight: bold;"></span></small>
<div style="text-align: center;"><span style="font-weight: bold;">WebNMS
Changes</span><br>
</div>
<table style="text-align: left; width: 1200px; height: 940px;"
 border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center;">File to
be changed<br>
      </td>
      <td style="vertical-align: top; text-align: center;">Previous
Entry<br>
      </td>
      <td style="vertical-align: top; text-align: center;">New
Entry (Remove the previous entry &amp; Add this)<br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="4" style="vertical-align: top;"><a
 name="setEnvbat"></a>setEnv.bat<br>
      </td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">set
      <span style="font-weight: bold;">WEBSERVER_HOME</span>=%NMS_HOME%\apache<br>
      </td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);">set
      <span style="font-weight: bold;">WEBSERVER_HOME</span>=%NMS_HOME%\apache\tomcat</td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">set
      <span style="font-weight: bold;">TOMCAT_HOME</span>=%WEBSERVER_HOME%\tomcat</td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);">set
      <span style="font-weight: bold;">TOMCAT_HOME</span>=%NMS_HOME%\apache\tomcat</td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">set
      <span style="font-weight: bold;">WEBCONTAINER_PORT</span>=8009<br>
      </td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);">set
      <span style="font-weight: bold;">WEBCONTAINER_PORT</span>=%WEBSERVER_PORT%</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-family: courier new,courier,monospace;">set
WEBSERVER_CLASSPATH=%TOMCAT_HOME%\common\lib\servlet.jar;
%TOMCAT_HOME%\bin\bootstrap.jar</span><br>
      </td>
      <td style="vertical-align: top; color: rgb(0, 0, 153);"><span
 style="font-family: courier new,courier,monospace;">set <span
 style="font-weight: bold;">WEBSERVER_CLASSPATH</span>=%TOMCAT_HOME%\common\lib\servlet-api.jar;
%TOMCAT_HOME%\bin\bootstrap.jar; %TOMCAT_HOME%\bin\tomcat-juli.jar;
%TOMCAT_HOME%\bin\commons-logging-api.jar</span><br>
      </td>
    </tr>
    <tr>
      <td colspan="1" rowspan="4"
 style="vertical-align: top; font-family: tahoma;"><small><a
 name="setEnvsh"></a>setEnv.sh<br>
      </small></td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;">WEBSERVER_HOME</span>=$NMS_HOME/apache</td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><span
 style="font-weight: bold;">WEBSERVER_HOME</span>=$NMS_HOME/apache/tomcat</td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;">TOMCAT_HOME</span>=$WEBSERVER_HOME/tomcat</td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><span
 style="font-weight: bold;">TOMCAT_HOME</span>=$NMS_HOME/apache/tomcat</td>
    </tr>
    <tr>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">WEBCONTAINER_PORT=8009</td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><span
 style="font-weight: bold;">WEBCONTAINER_PORT</span>=$WEBSERVER_PORT</td>
    </tr>
    <tr>
      <td style="vertical-align: top;"><span
 style="font-family: courier new,courier,monospace;">WEBSERVER_CLASSPATH=$TOMCAT_HOME/common/lib/servlet.jar:
$TOMCAT_HOME/bin/bootstrap.jar</span><br>
      </td>
      <td style="vertical-align: top; color: rgb(0, 0, 153);"><span
 style="font-family: courier new,courier,monospace;"><span
 style="font-weight: bold;">WEBSERVER_CLASSPATH</span>=$TOMCAT_HOME/common/lib/servlet-api.jar:
$TOMCAT_HOME/bin/bootstrap.jar: $TOMCAT_HOME/bin/tomcat-juli.jar:
$TOMCAT_HOME/bin/commons-logging-api.jar</span><br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: tahoma;"><small><a
 name="startnmsbat"></a>startnms.bat<br>
      </small></td>
      <td colspan="2" rowspan="1" style="vertical-align: top;"><small><span
 style="text-decoration: underline; font-family: tahoma;">Comment the
following copy
statements:</span><br style="text-decoration: line-through;">
      </small><span
 style="font-family: courier new,courier,monospace; color: rgb(153, 0, 0); text-decoration: line-through;">copy
%WEBSERVER_HOME%\conf\backup\httpd.conf %WEBSERVER_HOME%\conf &gt;
null.txt</span><br
 style="font-family: courier new,courier,monospace; color: rgb(153, 0, 0); text-decoration: line-through;">
      <span
 style="font-family: courier new,courier,monospace; color: rgb(153, 0, 0); text-decoration: line-through;">copy
%TOMCAT_HOME%\conf\backup\mod_jk.conf-auto
%TOMCAT_HOME%\conf\mod_jk.conf-nms &gt;null.txt</span><small><br>
      </small></td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: tahoma;"><small><br>
      </small></td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">%JAVA_HOME%\bin\java
-cp %CLASS_PATH% -Dtomcatshutdown.port=%TOMCAT_SHUTDOWNPORT%
-Dwebserver.rootdir=%WEBSERVER_HOME% -Dwebnms.rootdir=%NMS_HOME%&nbsp;
-Dwebcontainer.home=%TOMCAT_HOME% -Dwebserver.port=%WEBSERVER_PORT%
-Dwebcontainer.port=%WEBCONTAINER_PORT% com.adventnet.nms.util.<span
 style="font-weight: bold;">InitWebSvr</span> <span
 style="text-decoration: line-through;">%WEBSERVER_HOME%\conf\httpd.conf
      </span>%TOMCAT_HOME%\conf\server.xml <span
 style="text-decoration: line-through;">%TOMCAT_HOME%\conf\mod_jk.conf-nms</span>
%TOMCAT_HOME%\conf\workers.properties<br>
      </td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace; color: rgb(0, 0, 153);">%JAVA_HOME%\bin\java
-cp %CLASS_PATH%
-Dtomcatshutdown.port=%TOMCAT_SHUTDOWNPORT%
-Dwebserver.rootdir=%WEBSERVER_HOME% -Dwebnms.rootdir=%NMS_HOME%&nbsp;
-Dwebcontainer.home=%TOMCAT_HOME% -Dwebserver.port=%WEBSERVER_PORT%
-Dwebcontainer.port=%WEBCONTAINER_PORT%
com.adventnet.nms.util.<span style="font-weight: bold;">InitWebSvr&nbsp;</span>
%TOMCAT_HOME%\conf\server.xml&nbsp;
%TOMCAT_HOME%\conf\workers.properties</td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: tahoma;"><small><a
 name="startnmssh"></a>startnms.sh</small></td>
      <td colspan="2" rowspan="1" style="vertical-align: top;"><small><span
 style="text-decoration: underline; font-family: tahoma;">Comment the
following copy
statements:</span></small><br>
      <small style="font-family: courier new,courier,monospace;"><span
 style="color: rgb(153, 0, 0);">cp -f
$WEBSERVER_HOME/conf/backup/httpd.conf $WEBSERVER_HOME/conf</span><br
 style="color: rgb(153, 0, 0);">
      <span style="color: rgb(153, 0, 0);">cp -f
$TOMCAT_HOME/conf/backup/mod_jk.conf-auto
$TOMCAT_HOME/conf/mod_jk.conf-nms</span><br
 style="color: rgb(153, 0, 0);">
      <span style="color: rgb(153, 0, 0);">cp -f
$WEBSERVER_HOME/bin/backup/* $WEBSERVER_HOME/bin</span></small> <small><br>
      </small></td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: tahoma;"><small><br>
      </small></td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;">$JAVA_HOME/bin/java
-cp $CLASS_PATH -Dtomcatshutdown.port=$TOMCAT_SHUTDOWNPORT
-Dwebserver.rootdir=$WEBSERVER_HOME -Dwebnms.rootdir=$NMS_HOME
-Dwebcontainer.home=$TOMCAT_HOME -Dwebserver.port=$WEBSERVER_PORT
-Dwebcontainer.port=$WEBCONTAINER_PORT com.adventnet.nms.util.<span
 style="font-weight: bold;">InitWebSvr</span> <span
 style="text-decoration: line-through;">$WEBSERVER_HOME/conf/httpd.conf</span>
$TOMCAT_HOME/conf/server.xml&nbsp; <span
 style="text-decoration: line-through;">$TOMCAT_HOME/conf/mod_jk.conf-nms
$WEBSERVER_HOME/bin/apachectl</span>
$TOMCAT_HOME/conf/workers.properties <br>
      <br>
      </td>
      <td
 style="vertical-align: top; font-family: courier new,courier,monospace;"><span
 style="color: rgb(0, 0, 153);">$JAVA_HOME/bin/java -cp $CLASS_PATH
-Dtomcatshutdown.port=$TOMCAT_SHUTDOWNPORT
-Dwebserver.rootdir=$WEBSERVER_HOME -Dwebnms.rootdir=$NMS_HOME
-Dwebcontainer.home=$TOMCAT_HOME -Dwebserver.port=$WEBSERVER_PORT
-Dwebcontainer.port=$WEBCONTAINER_PORT com.adventnet.nms.util.<span
 style="font-weight: bold;">InitWebSvr&nbsp;</span>
$TOMCAT_HOME/conf/server.xml $TOMCAT_HOME/conf/workers.properties </span><br>
      <br>
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; font-family: tahoma;"><small><a
 name="conf"></a>NmsProcessesBE.conf&amp;<br>
NmsProcessesFE.conf</small></td>
      <td colspan="2" rowspan="1" style="vertical-align: top;">Comment
the <big
 style="font-family: courier new,courier,monospace; color: rgb(153, 0, 0); text-decoration: line-through;">com.adventnet.nms.util.RunApacheExeModule</big><span
 style="text-decoration: line-through;">
process</span></td>
    </tr>
  </tbody>
</table>
<br>
<a name="ssl"></a><small><span
 style="font-weight: bold; font-family: tahoma;">SSL related changes:<br>
<br style="font-family: tahoma;">
</span><span style="font-family: tahoma;">Apache needs OpenSSL
certificates
whereas Tomcat understands Java's
KeyStore certificates.</span><br style="font-family: tahoma;">
<span style="font-family: tahoma;">Hence the main advantage is that </span><span
 style="font-weight: bold; font-family: tahoma;"><span
 style="color: rgb(255, 0, 0);">a
single keystore file can be used to secure both https &amp; TCP</span> </span><span
 style="font-family: tahoma;">(A
single keystore file can be used for both https &amp; SSL over TCP)</span></small><span
 style="font-weight: bold;"><br>
</span><small><span style="font-family: tahoma;">A script has been
written (for </span><a style="font-family: tahoma;"
 href="http://nms-server/cgi-bin2/cvsweb.cgi/%7Echeckout%7E/nms/product_package/bin/createCertificates.bat?rev=1.1&amp;content-type=text/plain&amp;cvsroot=/advent/projects/webnms">Windows</a><span
 style="font-family: tahoma;">
&amp; </span><a style="font-family: tahoma;"
 href="http://nms-server/cgi-bin2/cvsweb.cgi/%7Echeckout%7E/nms/product_package/bin/createCertificates.sh?rev=1.1&amp;content-type=text/plain&amp;cvsroot=/advent/projects/webnms">Unix</a><span
 style="font-family: tahoma;">)
to create the certificates &amp; Truststore file.<br>
<br style="font-family: tahoma;">
</span><span style="font-family: tahoma;">WebNMS script &amp; conf
changes are
almost the same. The following will
be the changes needed for SSL</span><br style="font-family: tahoma;">
<br style="font-family: tahoma;">
<span style="font-family: tahoma;"><big
 style="font-family: courier new,courier,monospace;"><big><span
 style="font-weight: bold;">*</span></big></big> In
NmsProcessesBE.conf, CLIENT_SERVER protocol has to be changed to SSL</span><br
 style="font-family: tahoma;">
<br style="font-family: tahoma;">
<span style="font-family: tahoma;"></span></small><small><span
 style="font-family: tahoma;"><big
 style="font-family: courier new,courier,monospace;"><big><span
 style="font-weight: bold;">*</span></big></big> </span></small><small><span
 style="font-family: tahoma;">In startnms script, while calling
NmsMainBE, both Webserver &amp; Web
Container port has to be made as SSL Port &amp; Truststore file has to
be set:</span></small>
<br>
<big
 style="font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><span
 style="font-weight: bold;"><small>-Djavax.net.ssl.trustStore=conf/Truststore.truststore</small>
</span></big><br>
<small><span style="font-family: tahoma;">startnms.bat: </span></small><big
 style="font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><small><small><span
 style="font-family: tahoma;">-</span></small>Dwebserver.port=%<span
 style="font-weight: bold;">SSL</span>_PORT% -Dwebcontainer.port=%<span
 style="font-weight: bold;">SSL</span>_PORT%</small><br>
</big><small><span style="font-family: tahoma;">startnms.sh:</span></small>
<big
 style="font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><small>-Dwebserver.port=$<span
 style="font-weight: bold;">SSL</span>_PORT -Dwebcontainer.port=$<span
 style="font-weight: bold;">SSL</span>_PORT</small><br>
</big><br>
<small><span style="font-family: tahoma;"><big
 style="font-family: courier new,courier,monospace;"><big><span
 style="font-weight: bold;">*</span></big></big> </span></small><small><span
 style="font-family: tahoma;">In startApplicationClient script,</span></small>
<big
 style="font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><span
 style="font-weight: bold;"><small>-Djavax.net.ssl.trustStore=conf/Truststore.truststore</small></span></big><small><span
 style="font-family: courier new,courier,monospace;">
</span><span style="font-family: tahoma;">has to be set</span></small><big
 style="font-family: courier new,courier,monospace; color: rgb(0, 0, 153);"><small></small></big>
</body>
</html>
