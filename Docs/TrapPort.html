<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_7dyzectne1ce-8>li:before{content:"\0025a0  "}.lst-kix_7dyzectne1ce-7>li:before{content:"\0025cb  "}ol.lst-kix_f67krgwbauub-3.start{counter-reset:lst-ctn-kix_f67krgwbauub-3 0}.lst-kix_f67krgwbauub-8>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-8,lower-roman) ". "}ol.lst-kix_f67krgwbauub-6.start{counter-reset:lst-ctn-kix_f67krgwbauub-6 0}.lst-kix_f67krgwbauub-6>li{counter-increment:lst-ctn-kix_f67krgwbauub-6}.lst-kix_f67krgwbauub-7>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-7,lower-latin) ". "}ol.lst-kix_f67krgwbauub-4{list-style-type:none}.lst-kix_f67krgwbauub-5>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-5,lower-roman) ". "}ol.lst-kix_f67krgwbauub-5{list-style-type:none}ol.lst-kix_f67krgwbauub-2{list-style-type:none}.lst-kix_f67krgwbauub-2>li{counter-increment:lst-ctn-kix_f67krgwbauub-2}ol.lst-kix_f67krgwbauub-3{list-style-type:none}ol.lst-kix_f67krgwbauub-8{list-style-type:none}.lst-kix_f67krgwbauub-6>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-6,decimal) ". "}ol.lst-kix_f67krgwbauub-6{list-style-type:none}ol.lst-kix_f67krgwbauub-7{list-style-type:none}ol.lst-kix_f67krgwbauub-2.start{counter-reset:lst-ctn-kix_f67krgwbauub-2 0}.lst-kix_f67krgwbauub-5>li{counter-increment:lst-ctn-kix_f67krgwbauub-5}.lst-kix_f67krgwbauub-8>li{counter-increment:lst-ctn-kix_f67krgwbauub-8}.lst-kix_f67krgwbauub-0>li{counter-increment:lst-ctn-kix_f67krgwbauub-0}.lst-kix_f67krgwbauub-3>li{counter-increment:lst-ctn-kix_f67krgwbauub-3}ol.lst-kix_f67krgwbauub-5.start{counter-reset:lst-ctn-kix_f67krgwbauub-5 0}ul.lst-kix_f67krgwbauub-1{list-style-type:none}.lst-kix_f67krgwbauub-4>li{counter-increment:lst-ctn-kix_f67krgwbauub-4}ol.lst-kix_f67krgwbauub-8.start{counter-reset:lst-ctn-kix_f67krgwbauub-8 0}ul.lst-kix_7dyzectne1ce-7{list-style-type:none}ul.lst-kix_7dyzectne1ce-8{list-style-type:none}ul.lst-kix_7dyzectne1ce-5{list-style-type:none}ul.lst-kix_7dyzectne1ce-6{list-style-type:none}ol.lst-kix_f67krgwbauub-4.start{counter-reset:lst-ctn-kix_f67krgwbauub-4 0}ul.lst-kix_7dyzectne1ce-0{list-style-type:none}ul.lst-kix_7dyzectne1ce-3{list-style-type:none}ul.lst-kix_7dyzectne1ce-4{list-style-type:none}ul.lst-kix_7dyzectne1ce-1{list-style-type:none}ul.lst-kix_7dyzectne1ce-2{list-style-type:none}.lst-kix_f67krgwbauub-1>li:before{content:"\0025cb  "}ol.lst-kix_f67krgwbauub-0{list-style-type:none}.lst-kix_f67krgwbauub-3>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-3,decimal) ". "}.lst-kix_f67krgwbauub-0>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-0,decimal) ". "}.lst-kix_f67krgwbauub-4>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-4,lower-latin) ". "}.lst-kix_7dyzectne1ce-0>li:before{content:"\0025cf  "}.lst-kix_7dyzectne1ce-1>li:before{content:"\0025cb  "}ol.lst-kix_f67krgwbauub-7.start{counter-reset:lst-ctn-kix_f67krgwbauub-7 0}.lst-kix_f67krgwbauub-2>li:before{content:"" counter(lst-ctn-kix_f67krgwbauub-2,lower-roman) ". "}.lst-kix_7dyzectne1ce-4>li:before{content:"\0025cb  "}.lst-kix_7dyzectne1ce-3>li:before{content:"\0025cf  "}.lst-kix_7dyzectne1ce-5>li:before{content:"\0025a0  "}.lst-kix_7dyzectne1ce-2>li:before{content:"\0025a0  "}.lst-kix_7dyzectne1ce-6>li:before{content:"\0025cf  "}ol.lst-kix_f67krgwbauub-0.start{counter-reset:lst-ctn-kix_f67krgwbauub-0 0}.lst-kix_f67krgwbauub-7>li{counter-increment:lst-ctn-kix_f67krgwbauub-7}ol{margin:0;padding:0}table td,table th{padding:0}.c1{orphans:2;widows:2;height:11pt}.c7{background-color:#ffffff;max-width:540pt;padding:54pt 36pt 54pt 36pt}.c3{margin-left:72pt;padding-left:0pt}.c6{margin-left:36pt;padding-left:0pt}.c2{orphans:2;widows:2}.c4{padding:0;margin:0}.c0{font-size:12pt;font-family:"Times New Roman"}.c5{text-align:center}.c8{font-weight:700}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c7"><p class="c2 c5"><span class="c0 c8">How to receive traps in port 162 even if Web NMS is started by a non-root user in Linux/Solaris ? </span></p><p class="c1"><span class="c0 c8"></span></p><p class="c2"><span class="c0">There are two possible solutions to meet this requirement:</span></p><p class="c2"><span class="c0">----------------------------------------------------------------</span></p><p class="c2"><span class="c0 c8">Solution 1 :</span><span class="c0">&nbsp;Redirection of packets from the privileged port (162) to a non-previliged port (1024-65535) by configuring the iptables in the Linux System.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">The following are the steps :</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">Before starting Web NMS</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">1)Login as root user</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">2) Make sure the linux kernel is 2.4.x</span></p><p class="c2"><span class="c0"># uname -a </span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">3) Remove the ipchains</span></p><p class="c2"><span class="c0"># /sbin/lsmod | grep ipchains</span></p><p class="c2"><span class="c0">-If ipchains is loaded, remove it using</span></p><p class="c2"><span class="c0"># /sbin/rmmod ipchains</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">4) Load the iptables modules </span></p><p class="c2"><span class="c0"># /sbin/insmod ip_tables </span></p><p class="c2"><span class="c0"># /sbin/insmod ip_conntrack</span></p><p class="c2"><span class="c0"># /sbin/insmod iptable_filter</span></p><p class="c2"><span class="c0"># /sbin/insmod iptable_mangle</span></p><p class="c2"><span class="c0"># /sbin/insmod iptable_nat</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">5) Add rule to iptables</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0"># iptables -t nat -A PREROUTING -p udp --dport 162 -j REDIRECT</span></p><p class="c2"><span class="c0">--to-ports &lt;NON-PREVILIGED PORT&gt; </span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">6) To configure it permanently,you can add points</span></p><p class="c2"><span class="c0">4 &amp; 5 in /etc/rc.d/rc.local </span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">----------------------------------------------------------------</span></p><p class="c2"><span class="c0 c8">Solution 2 :</span><span class="c0">&nbsp;Operating Systems have support for sudo user concept where you can configure normal users to run some specific commands as root users.</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">We can make use of the sudo user concept to start (only) WebNMS as root user from the normal user login itself, to enable opening port 162 for trap reception</span></p><p class="c1"><span class="c0"></span></p><p class="c2"><span class="c0">To achieve this, do the following configurations in the machine where you are trying to start WebNMS server.</span></p><ol class="c4 lst-kix_f67krgwbauub-0 start" start="1"><li class="c6 c2"><span class="c0">Login as root</span></li><li class="c1 c6"><span class="c0"></span></li><li class="c6 c2"><span class="c0">Edit /etc/sudoers file and add the following entries</span></li><li class="c1 c6"><span class="c0"></span></li></ol><ul class="c4 lst-kix_f67krgwbauub-1 start"><li class="c2 c3"><span class="c0">Cmnd_Alias TEST =/bin/sh,&lt;WebNMSHome&gt;/bin/startnms.sh</span></li><li class="c1 c3"><span class="c0"></span></li><li class="c3 c2"><span class="c0">normalUserName ALL=NOPASSWD: TEST</span></li><li class="c1 c3"><span class="c0"></span></li></ul><ol class="c4 lst-kix_f67krgwbauub-0" start="5"><li class="c6 c2"><span class="c0">Logout from root</span></li><li class="c1 c6"><span class="c0"></span></li><li class="c6 c2"><span class="c0">Execute the following command to start WebNMS</span></li><li class="c6 c2"><span class="c0">o sudo sh startnms.sh</span></li></ol><p class="c2"><span class="c0">Note:</span></p><ul class="c4 lst-kix_7dyzectne1ce-0 start"><li class="c6 c2"><span class="c0">normalUserName refers to the name of the Normal User</span></li><li class="c1 c6"><span class="c0"></span></li><li class="c6 c2"><span class="c0">&lt;Web NMS Home&gt; refers to the directory where Web NMS is installed.</span></li></ul><p class="c1"><span></span></p></body></html>